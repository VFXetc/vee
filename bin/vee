#!/usr/bin/env python

import os
import sys


def ansi(*args):
    return ''.join('\x1b[' + str(x) for x in args)

def sgr(*args):
    return ''.join(ansi(str(x) + 'm') for x in args)


try:
    from vee.commands.main import main

except ImportError as e:
    here = os.path.abspath(os.path.join(__file__, '..', '..'))
    for path in (here, os.path.join(here, 'lib/python2.7/site-packages')):
        init_py = os.path.join(path, 'vee', '__init__.py')
        if os.path.exists(init_py):
            bootstrapped = path
            sys.path.append(path)
            break
    else:
        print >> sys.stderr, sgr(1, 31) + "Error:" + sgr(0) + " vee can't bootstrap."
        print >> sys.stderr, e
        exit(2)

else:
    bootstrapped = None


try:
    from vee.commands.main import main

except ImportError as e:
    print >> sys.stderr, sgr(1, 31) + "Error:" + sgr(0) + " vee's install is broken."
    print >> sys.stderr, e
    if bootstrapped:
        print >> sys.stderr, 'Automatic bootstrap detected:', bootstrapped
    exit(1)


main()
